(function(e){function t(t){for(var n,i,s=t[0],u=t[1],l=t[2],c=0,d=[];c<s.length;c++)i=s[c],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&d.push(o[i][0]),o[i]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);p&&p(t);while(d.length)d.shift()();return a.push.apply(a,l||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,i=1;i<r.length;i++){var u=r[i];0!==o[u]&&(n=!1)}n&&(a.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},o={app:0},a=[];function i(e){return s.p+"js/"+({about:"about"}[e]||e)+"."+{about:"f7a9ff93"}[e]+".js"}function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.e=function(e){var t=[],r=o[e];if(0!==r)if(r)t.push(r[2]);else{var n=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=n);var a,u=document.createElement("script");u.charset="utf-8",u.timeout=120,s.nc&&u.setAttribute("nonce",s.nc),u.src=i(e);var l=new Error;a=function(t){u.onerror=u.onload=null,clearTimeout(c);var r=o[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+n+": "+a+")",l.name="ChunkLoadError",l.type=n,l.request=a,r[1](l)}o[e]=void 0}};var c=setTimeout((function(){a({type:"timeout",target:u})}),12e4);u.onerror=u.onload=a,document.head.appendChild(u)}return Promise.all(t)},s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var c=0;c<u.length;c++)t(u[c]);var p=l;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d"),r("e792"),r("0cdd");var n=r("2b0e"),o=r("c015");r("ab8b"),r("2dd8");n["default"].use(o["a"]);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},i=[],s=(r("5c0b"),r("2877")),u={},l=Object(s["a"])(u,a,i,!1,null,null,null),c=l.exports,p=(r("d3b7"),r("3ca3"),r("ddb0"),r("8c4f")),d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Map")},f=[],m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"container"}},[r("div",{staticClass:"radio-group"},[r("b-form-group",[r("b-form-radio-group",{attrs:{options:e.collegeOptions,"value-field":"no","text-field":"name",inline:""},model:{value:e.selectedCollege,callback:function(t){e.selectedCollege=t},expression:"selectedCollege"}})],1)],1),r("div",{staticClass:"slider"},[r("vue-slider",{model:{value:e.monthYearPercent,callback:function(t){e.monthYearPercent=t},expression:"monthYearPercent"}})],1),r("div",{attrs:{id:"map"}}),r("div",{staticClass:"ol-popup",attrs:{id:"popup"}},[r("a",{staticClass:"ol-popup-closer",attrs:{href:"#",id:"popup-closer"}}),r("div",{staticClass:"hide",attrs:{id:"popup-existing"}},[r("div",[e._v(e._s(e.markerName))]),r("div",[e._v(e._s(e.markerTransfered))]),r("div",[e._v(e._s(e.markerNote))]),r("div",[e._v(e._s(e.markerSubnote))])]),r("div",{staticClass:"hide",attrs:{id:"popup-new"}},[r("div",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.markerName,expression:"markerName"}],attrs:{placeholder:"輸入顯示名稱"},domProps:{value:e.markerName},on:{input:function(t){t.target.composing||(e.markerName=t.target.value)}}})])])])])},h=[],g=r("1da1"),v=r("2909"),b=(r("96cf"),r("99af"),r("b0c0"),r("d81d"),r("159b"),r("4de4"),r("a630"),r("b64b"),r("5bc0"),r("4cdf")),w=r("5eee"),y=r("f403"),O=r("a2c7"),P=r("0710"),N=r("6c77"),k=r("ce2c"),x=r("8682"),C=r("83a6"),F=r("d0e9"),_=r("5831"),j=r("480c"),E=r("3e6b"),L=r("ca42"),I=r("256f"),S=r("834d"),A=r("35a7"),M=r("4971"),D=r.n(M),T=(r("3e39"),r("a002")),R=r.n(T),B=R.a.createInstance({name:"mydatabase",version:1,storeName:"mystorageobj"});B.setDriver([R.a.INDEXEDDB,R.a.WEBSQL,R.a.LOCALSTORAGE]).then((function(){B.setItem("testkey","testvalue",(function(){console.log("Of the driver options given, localforage is using:"+B.driver())}))})).catch((function(e){console.error("QQ",new Error(e))}));var V=[{"編號":"3","校名":"私立／國立復旦大學","分校":"a.渝校：","時間":"1930/01/01","遷移地名":"上海","經度":"121.28","緯度":"31.13","附註":"","備註":""},{"編號":"3","校名":"私立／國立復旦大學","分校":"a.渝校：","時間":"1930/01/01","遷移地名":"江西盧山","經度":"115.47","緯度":"29.3","附註":"","備註":""},{"編號":"3","校名":"私立／國立復旦大學","分校":"a.渝校：","時間":"1930/01/01","遷移地名":"貴陽","經度":"106.42","緯度":"26.34","附註":"","備註":""},{"編號":"3","校名":"私立／國立復旦大學","分校":"a.渝校：","時間":"1938/02/01","遷移地名":"重慶","經度":"106.3","緯度":"29.3","附註":"1938年2月，確定校址於重慶北邊150餘里北碚對岸的夏壩。二月下旬，師生分批到達，暫借黃桷鎮河神廟（又名紫陽宮）為辦公室，小學餘屋為教室，煤炭坪為學生宿舍，王家花園為教師宿舍。","備註":"（復旦大學校史編寫組編，《復旦大學誌》（第一卷）（上海：復旦大學出版社，1985年），頁153。）"},{"編號":"3","校名":"私立／國立復旦大學","分校":"a.渝校：","時間":"1938/02/01","遷移地名":"上海江灣","經度":"121.3","緯度":"31.18","附註":"","備註":""},{"編號":"3","校名":"私立／國立復旦大學","分校":"","時間":"","遷移地名":"","經度":"","緯度":"","附註":"","備註":""},{"編號":"3","校名":"私立／國立復旦大學","分校":"b.滬校：","時間":"1930/01/01","遷移地名":"上海","經度":"121.28","緯度":"31.13","附註":"","備註":""},{"編號":"3","校名":"私立／國立復旦大學","分校":"b.滬校：","時間":"1938/02/01","遷移地名":"上海英/法租界","經度":"121.28","緯度":"31.13","附註":"1938年2月，復旦數百留滬學生要求李登輝校長設法上課，解決失學問題。以滬上租界之內，尚屬安全，並無任何干涉。以上好最後一課的精神，維持復旦在滬之根基。如形勢突變，則「當散即散」，亦屬易事。于是，在校友的協助下，租英租北京東路中一信托大樓的四、五樓作為臨時校舍，1938年2月23日正式上課，至1938年6月25日學期結束。\n因中一信托大樓地處鬧市，熙熙嚷嚷，不宜辦學。1938年下學期，租借法租界霞飛路（今淮海路）1726號房屋為校舍。\n吳南軒由渝來滬，商定滬校改稱復旦大學補習部。","備註":"（復旦大學校史編寫組編，《復旦大學誌》（第一卷）（上海：復旦大學出版社，1985年），頁154, 155。）"},{"編號":"3","校名":"私立／國立復旦大學","分校":"b.滬校：","時間":"1938/11/01","遷移地名":"上海仁記路","經度":"121.28","緯度":"31.14","附註":"法租界當局害怕日本帝國主義，堅決不准復旦在該處上課。不得已，1938年11月三遷校址至仁記路（今滇池路）中孚大樓三樓上課。","備註":"復旦大學校史編寫組編，《復旦大學誌》（第一卷）（上海：復旦大學出版社，1985年），頁154。）"},{"編號":"3","校名":"私立／國立復旦大學","分校":"b.滬校：","時間":"1938/09/01","遷移地名":"上海仁記路","經度":"121.28","緯度":"31.14","附註":"1938年秋，吳南軒因在重慶市區比較容易聘請教師和進行教學實習，將商學院各系及新聞系、經濟系遷往菜園壩。","備註":"（復旦大學校史編寫組編，《復旦大學誌》（第一卷）（上海：復旦大學出版社，1985年），頁155。）"},{"編號":"3","校名":"私立／國立復旦大學","分校":"b.滬校：","時間":"1939/04/01","遷移地名":"上海赫德路","經度":"121.26","緯度":"31.14","附註":"1939年4月，四遷至赫德路（今常德路）574號上課。","備註":"（復旦大學校史編寫組編，《復旦大學誌》（第一卷）（上海：復旦大學出版社，1985年），頁154。）"},{"編號":"3","校名":"私立／國立復旦大學","分校":"b.滬校：","時間":"1939/05/01","遷移地名":"重慶","經度":"106.3","緯度":"29.3","附註":"1939年5月3及4兩日，日機對重慶市區狂轟濫炸，商學院及新聞、經濟兩系，只得又遷回北碚黃桷鎮。","備註":"（復旦大學校史編寫組編，《復旦大學誌》（第一卷）（上海：復旦大學出版社，1985年），頁155。）"},{"編號":"3","校名":"私立／國立復旦大學","分校":"b.滬校：","時間":"1946/07/01","遷移地名":"上海江灣","經度":"121.3","緯度":"31.18","附註":"1946年7月，開始自重慶運送全體員生及公物回滬，10月完成復員，並與抗戰期間在滬設立之上海補習部合併。","備註":"（《第二次中國教育年鑑》，頁610）"},{"編號":"37","校名":"私立南華學院","分校":"","時間":"1938/07/01","遷移地名":"香港","經度":"114.11","緯度":"22.19","附註":"該院（港校）於1938年10月創設於香港九龍獅子石道。1939年7月，由教育部立案。","備註":"（《第二次中國教育年鑑》，頁739。）"},{"編號":"37","校名":"私立南華學院","分校":"","時間":"1939/08/01","遷移地名":"梅縣","經度":"116.06","緯度":"24.33","附註":"1939年8月，設校本部於梅縣之古田村租民房開學。","備註":"（《第二次中國教育年鑑》，頁739。）"},{"編號":"37","校名":"私立南華學院","分校":"","時間":"1940/02/01","遷移地名":"梅縣","經度":"116.06","緯度":"24.33","附註":"1940年2月，港校遷何文田太平道新校舍上課。","備註":"（《第二次中國教育年鑑》，頁739。）"},{"編號":"37","校名":"私立南華學院","分校":"","時間":"1941/04/01","遷移地名":"梅縣","經度":"116.06","緯度":"24.33","附註":"1941年4月，將港校大學部移梅縣集中辦理。","備註":"（《第二次中國教育年鑑》，頁739。）"},{"編號":"37","校名":"私立南華學院","分校":"","時間":"1946/02/01","遷移地名":"汕頭","經度":"116.41","緯度":"23.23","附註":"1946年2月，院址遷汕頭。","備註":"（《第二次中國教育年鑑》，頁739。）"}],J={name:"Map",props:{msg:String},components:{VueSlider:D.a},data:function(){return{map:null,tileLayer:null,source:null,vector:null,overlay:null,duration:3e3,markerName:"",markerNote:"",markerSubnote:"",markerTransfered:"",focusingFeature:null,storedFeatureProps:[],autoplaying:!1,autoplayIndex:0,reducedCollegeList:[],selectedCollege:"all",monthYearPercent:0,collegeOptions:[]}},watch:{selectedCollege:function(){this.redrawFeatures()},reducedCollegeList:function(){console.log("reducedCollegeList watched",this.reducedCollegeList),console.log("this.collegeOptions",this.collegeOptions),this.collegeOptions=[{no:"all",name:"All"}].concat(Object(v["a"])(this.reducedCollegeList)),console.log("this.collegeOptions",this.collegeOptions)}},computed:{popupContainer:function(){return document.getElementById("popup")},popupExisting:function(){return document.getElementById("popup-existing")},popupNew:function(){return document.getElementById("popup-new")},popupCloser:function(){return document.getElementById("popup-closer")}},methods:{addRandomFeature:function(){var e=360*Math.random()-180,t=180*Math.random()-90,r=new y["a"](Object(I["d"])([e,t],Object({NODE_ENV:"production",BASE_URL:"/"}).MAP_PROJ)),n=new b["a"](r);return this.source.addFeature(n),n},createNewFeature:function(e){var t=e.uuid,r=e.no,n=e.name,o=e.time,a=e.subName,i=e.transfered,s=e.note,u=e.subNote,l=e.lat,c=e.long,p=new y["a"](Object(I["d"])([c,l],Object({NODE_ENV:"production",BASE_URL:"/"}).MAP_PROJ)),d=new b["a"](p);d.set("uuid",t),d.set("no",r),d.set("name",n),d.set("time",o),d.set("subName",a),d.set("transfered",i),d.set("note",s),d.set("subNote",u),this.source.addFeature(d)},flash:function(e){var t=this,r=(new Date).getTime(),n=this.tileLayer.on("postrender",(function(o){var a=Object(S["a"])(o),i=o.frameState,s=e.getGeometry().clone(),u=i.time-r,l=u/t.duration,c=25*Object(L["b"])(l)+5,p=Object(L["b"])(1-l),d=new N["b"]({image:new k["a"]({radius:c,stroke:new x["a"]({color:"rgba(255, 0, 0, "+p+")",width:.25+p})})});a.setStyle(d),a.drawGeometry(s),u>t.duration?Object(A["b"])(n):t.map.render()}))},initMap:function(){var e=this;this.tileLayer=new j["a"]({source:new F["a"]({wrapX:!1})}),this.overlay=new P["a"]({element:this.popupContainer,autoPan:!0,autoPanAnimation:{duration:250}}),this.map=new w["a"]({target:"map",layers:[this.tileLayer],overlays:[this.overlay],view:new O["a"]({projection:Object({NODE_ENV:"production",BASE_URL:"/"}).MAP_PROJ,center:[0,0],zoom:3,multiWorld:!0})}),this.source=new _["a"]({wrapX:!1}),this.vector=new E["a"]({source:this.source,style:new N["b"]({image:new k["a"]({radius:5,fill:new C["a"]({color:"blue"}),stroke:new x["a"]({color:"blue",width:5})})})}),this.map.addLayer(this.vector),this.map.addOverlay(this.overlay),this.popupCloser.onclick=this.hidePopup,this.map.on("singleclick",(function(t){if(!0===e.map.hasFeatureAtPixel(t.pixel)){var r=t.coordinate;if(e.overlay.setPosition(r),e.focusingFeature=e.map.getFeaturesAtPixel(t.pixel)[0],!e.focusingFeature.get("uuid"))return;e.markerName="".concat(e.focusingFeature.get("name")||"","             ").concat(e.focusingFeature.get("subName")||""),e.markerTransfered=e.focusingFeature.get("tranfered")||"",e.markerNote=e.focusingFeature.get("note")||"",e.markerSubnote=e.focusingFeature.get("subNote")||"",e.popupNew.classList.add("hide"),e.popupExisting.classList.remove("hide")}else e.hidePopup()}))},clearAll:function(){var e=this;B.setItem("saveFeatureProp",[]).then((function(){e.storedFeatureProps=[],e.source.clear()}))},overview:function(){var e=this;if(this.autoplaying)return console.log("cancel overview"),this.map.getView().cancelAnimations(),void(this.autoplaying=!1);this.autoplaying=!0,this.autoplayIndex=0;var t=function t(){if(e.autoplaying){var r=e.storedFeatureProps[e.autoplayIndex++];e.map.getView().animate({center:[r.long,r.lat]}),e.autoplayIndex>=e.storedFeatureProps.length?e.autoplaying=!1:window.setTimeout(t,3e3)}};t()},addPoint:function(e){var t=e.編號,r=e.校名,n=e.分校,o=e.時間,a=e.經度,i=e.緯度,s=e.遷移地名,u=e.備註,l=e.附註,c={uuid:Date.now(),no:parseInt(t),name:r,time:new Date(o),subName:n,transfered:s,note:l,subNote:u,lat:parseFloat(i),long:parseFloat(a)};return c},hidePopup:function(){return this.popupNew.classList.add("hide"),this.popupExisting.classList.add("hide"),this.overlay.setPosition(void 0),this.popupCloser.blur(),!1},redrawFeatures:function(){var e=this;this.source.clear(),this.storedFeatureProps.filter((function(t){return"all"===e.selectedCollege||parseInt(t.no)===parseInt(e.selectedCollege)})).forEach((function(t){e.createNewFeature(t)}))}},mounted:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(){var t,r,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.initMap(),e.next=3,B.getItem("rawDataInit");case 3:if(t=e.sent,console.log("rawDataInit",t),t){e.next=13;break}return r={},this.storedFeatureProps=Array.from(V).map((function(e){var t=n.addPoint(e);return r[t.no]=t.name,n.createNewFeature(t),t})),this.reducedCollegeList=Object.keys(r).map((function(e){return{no:e,name:r[e]}})),e.next=11,B.setItem("saveFeatureProp",this.storedFeatureProps);case 11:return e.next=13,B.setItem("savereducedCollegeList",this.reducedCollegeList);case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},Y=J,$=(r("8208"),Object(s["a"])(Y,m,h,!1,null,"00e65514",null)),G=$.exports,Q={name:"Home",components:{Map:G}},U=Q,X=Object(s["a"])(U,d,f,!1,null,null,null),H=X.exports;n["default"].use(p["a"]);var W=[{path:"/",name:"Home",component:H},{path:"/about",name:"About",component:function(){return r.e("about").then(r.bind(null,"f820"))}}],q=new p["a"]({mode:"history",base:"/",routes:W}),z=q,K=r("2f62");n["default"].use(K["a"]);var Z=new K["a"].Store({state:{},mutations:{},actions:{},modules:{}});n["default"].config.productionTip=!1,new n["default"]({router:z,store:Z,render:function(e){return e(c)}}).$mount("#app")},"57ee":function(e,t,r){},"5c0b":function(e,t,r){"use strict";r("9c0c")},8208:function(e,t,r){"use strict";r("57ee")},"9c0c":function(e,t,r){}});
//# sourceMappingURL=app.edcfd39f.js.map